<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; background: #eef2f7; padding: 20px; }
        h2 { margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; background: white; }
        th, td { padding: 12px; border: 1px solid #ddd; text-align: center; }
        th { background-color: #007BFF; color: white; }

        a, button {
            margin: 5px;
            display: inline-block;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            border: none;
            cursor: pointer;
        }

        .btn-add { background: #28a745; color: white; }
        .btn-add:hover { background: #218838; }

        .btn-download { background: #17a2b8; color: white; }
        .btn-download:hover { background: #138496; }

        .btn-logout { background: #dc3545; color: white; }
        .btn-logout:hover { background: #c82333; }

        .btn-edit { background: #ffc107; color: white; }
        .btn-edit:hover { background: #e0a800; }

        .btn-delete { background: #dc3545; color: white; }
        .btn-delete:hover { background: #c82333; }
    </style>
</head>
<body>
    <h2>Hello {{ customer_name }}, here are your orders:</h2>
    <a href="/add_order" class="btn-add">‚ûï Add Order</a>
    <a href="/download_orders" class="btn-download">‚¨á Download Orders (CSV)</a>
    <a href="/logout" class="btn-logout">üö™ Logout</a>
    <br><br>
    <table>
        <tr>
            <th>Order ID</th>
            <th>Product</th>
            <th>Qty</th>
            <th>Buy Price</th>
            <th>Sell Price</th>
            <th>Status</th>
            <th>Order Date</th>
            <th>Profit/Loss</th>
            <th>Actions</th>
        </tr>
        {% for order in orders %}
        <tr>
            <td>{{ order.OrderID }}</td>
            <td>{{ order.ProductName }}</td>
            <td>{{ order.Quantity }}</td>
            <td>{{ order.BuyPrice }}</td>
            <td>{{ order.SellPrice or '---' }}</td>
            <td>{{ order.Status }}</td>
            <td>{{ order.OrderDate }}</td>
            <td>
                {% if order.SellPrice %}
                    {{ (order.SellPrice - order.BuyPrice) * order.Quantity }}
                {% else %}
                    ---
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('edit_order', order_id=order.OrderID) }}" class="btn-edit">‚úè Edit</a>

                <!-- ‚úÖ Correct DELETE Form (POST request) -->
                <form action="{{ url_for('delete_order', order_id=order.OrderID) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn-delete" onclick="return confirm('Are you sure you want to delete this order?');">üóë Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
